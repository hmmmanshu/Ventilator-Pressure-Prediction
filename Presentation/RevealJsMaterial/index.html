<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Presentation</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/night.css">
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <section>
                <section data-markdown data-background-image="./1.jpeg">
                    <textarea data-template>
						<h1 class="r-fit-text" style="text-shadow: 5px 5px 15px #000;">Ventilator pressure automation project</h1>
						<h4 style="text-shadow: 5px 5px 15px #000;">Team Data Wranglers</h1>
						<h4 style="text-shadow: 5px 5px 15px #000;">Intellinovation - 2021</h1><br>
						<h3 style="text-shadow: 5px 5px 15px #000;">Graphic Era Deemed to be University</h3>
					  </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        **Current scenario :** Mechanical Ventilation
                        ___
                        Mechanical ventilation is a clinician-intensive procedure. Also, building new methods of 
                        ventilation would cost a lot of money and would even get more expensive once it reached clinical trials
                        ___
                        Current simulators are trained as an ensemble, where each model simulates a single lung setting. 
                        However, lungs and their attributes form a continuous space, so a parametric approach must be 
                        explored that would consider the differences in patient lungs
					  </textarea>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        **Our aim :** Automate Ventilation
                        ___
                        We need to generalize the simulation rather than to confine a simulator to a single lung type as mentioned above
                        ___
                        With the help of a deep learning, we can achieve such a result and help to automate the procedure
                        as well as reduce the cost of introducing a new technology
					  </textarea>
                </section>
            </section>

            <section>
                <section data-markdown data-auto-animate>
                    <textarea data-template>
                        ## Workflow
                    </textarea>
                </section>
                <section data-markdown data-auto-animate>
                    <textarea data-template>
                        ## Workflow
                        - Reading the data
                        - Data analysis
                        - Feature engineering
                        - Scaling
                        - Modelling
                        - Training
                        - Cross validation
                        - Output
                    </textarea>
                </section>
            </section>

            <section>
                <section>
                    <h2>Data analysis</h2>
                </section>
                <section data-auto-animate>
                    <h5>Loading the data</h5>
                    <pre><code>
						import pandas as pd
						path = "./ "
						train_ori = pd.read_csv(path + "train.csv ")
						test_ori  = pd.read_csv(path + "test.csv ")
						sample = pd.read_csv(path + "sample_submission.csv ")
					  </code></pre></section>
                <section data-auto-animate>
                    <h5>Loading the data</h5>
                    <pre><code>
						test.head()
					  </code></pre>
                    <img width="980" src="./table.png" alt="table">
                </section>
                <section data-auto-animate>
                    <h2>EDA</h2>
                </section>
                <section data-auto-animate>
                    <h2>EDA</h2>
                    <h4>Feature distribution</h4>
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Common features</h4>
                    <img width="1920 " src="./Visualizations/R.jpg " alt="R ">
                    <img width="1920 " src="./Visualizations/C.jpg " alt="C ">
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Common features</h4>
                    <img width="1920 " src="./Visualizations/C.jpg " alt="C ">
                    <img width="1920 " src="./Visualizations/u_in.jpg " alt="Rime step ">
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Common features</h4>
                    <img width="1920 " src="./Visualizations/u_in.jpg " alt="Rime step ">
                    <img width="1920 " src="./Visualizations/u_out.jpg " alt="u_in ">
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Numerical features</h4>
                    <img width="1920 " src="./Visualizations/Count_C.jpg " alt="u_in ">
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Numerical features</h4>
                    <img width="1920 " src="./Visualizations/Count_R.jpg " alt="u_out ">
                </section>
                <section data-auto-animate>
                    <h4>Feature distribution</h4>
                    <h4>Numerical features</h4>
                    <img height="820 " src="./Visualizations/Count_u_out.jpg " alt="u_out ">
                </section>
                <section>
                    <h3>Pressure over time</h3>
                    <img width="1920px " src="./output.gif " alt="Video here ">
                </section>
            </section>
            <section>
                <section data-auto-animate>
                    <h2>Inference</h2>
                </section>
                <section data-auto-animate>
                    <h2>Inference</h2>
                    <p>Since the given data is time series data, we prefer using a recurrent neural network for the purpose,<br> LSTM network to be more specific</p>
                </section>
                <section data-auto-animate>
                    <h2>Inference</h2>
                    <p>Reason being, RNNs have a ability to remmeber data rather than to train and predict upon data once and for all</p>
                </section>
                <section data-auto-animate>
                    <h3>Classic feed forward network</h3>
                    <img src="./1_YgJ6SYO7byjfCmt5uV0PmA.png" alt="NN">
                </section>
                <section data-auto-animate>
                    <h3>Classic feed forward network</h3>
                    <h3>as opposed to RNN</h3>
                    <img src="./rnn-vs-fnn.png" alt="NN">
                </section>
                <section>
                    <h3>Network choice</h3>
                    <img src="./Feed-Forward-Neural-Networks.png" alt="">
                    <p>Many to one</p>
                </section>
            </section>
            <section>
                <section>
                    <h2>Feature engineering</h2>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        | Feature            | Definition  |
                        | -----------        | ----------- |
                        | R                  | str(R)      |
                        | C                  | str(C)      |
                        | RC                 | R+C         |
                        | u_in_lag           | shift-1(u_in) * breath_id_lagsame   |
                        | u_in_lag2          | shift-2(u_in) * breath_id_lag2same  |
                        | u_out_lag2         | shift-2(u_out) * breath_id_lag2same |
                        | area               | cumulative_sum(time_step * u_out)   |
                        | cross              | u_in * u_out       |
                        | cross2             | time_step * u_out  |
                        | breath_id_lag      | shift-1(breath_id) |
                        | breath_id_lag2     | shift-2(breath_id) |
                        | breath_id_lagsame  | np.select([df['breath_id_lag']==df['breath_id']], [1], 0)  |
                        | breath_id_lag2same | np.select([df['breath_id_lag2']==df['breath_id']], [1], 0) |
                        | u_in_cumsum        | cumulative_sum(u_in)     |
                        | u_in_cummean       | u_in_cumsum/breath_count |
                    </textarea>
                </section>
            </section>

            <section>
                <section>
                    <h2>Data scaling</h2>
                    <pre><code data-trim data-noescape>
                        RS = RobustScaler()
                        train = RS.fit_transform(train)
                        test = RS.transform(test)
					  </code></pre></section>
            </section>

            <section>
                <section>
                    <h2>Modelling</h2>
                </section>
                <section data-auto-animate>
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 450 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 350 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 250 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 150 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 100 units) )</p>
                </section>
                <section data-auto-animate>
                    <p style="font-size:34px; ">Input layer</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 450 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 350 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 250 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 150 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 100 units) )</p>
                </section>
                <section data-auto-animate>
                    <p style="font-size:34px; ">Input layer</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 450 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 350 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 250 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 150 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Bidirectional ( LSTM ( 100 units) )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Dense( 50 )</p>
                    <img width="20px " src="./arrow.png " alt=" ">
                    <p style="font-size:34px; ">Dense( 1 )</p>
                </section>
                <section data-markdown>
                    <textarea data-template>
                        | Parameter        | Value       |
                        | -----------      | ----------- |
                        | Epochs           | 300         |
                        | Batch Size       | 512         |
                        | Folds            | 6           |
                        | Shuffle          | True        |
                        | Optimizer        | Adam        |
                        | Loss             | Mean Absolute Error                       |
                        | Callbacks        | LearningRateScheduler (Exponential Decay) |
                    </textarea>
                </section>
            </section>

            <section>
                <section>
                    <h2>Result</h2>
                    <p>Mean Absolute Error = 0.158</p>
                    <p>Runtime = 31315.8 seconds (8.7 hours)</p>
                    <p>Accelerator = TPU v3.8</p>
                </section>
                <section>
                    <h3>Comparing manual pressure to pressure generated by model</h3>
                    <img src="./output.gif " alt=" ">
                    <img src="./output2.gif " alt=" ">
                </section>
            </section>

            <section id="final ">
                <h1>Thank You</h1>
                <a href="./Notebook.html ">View source code</a>
                <p><br></p>
                <h5>Himanshu Negi</h5>
                <h5>Shivanshu Semwal</h5>
                <h5>Rishabh Bharadwaj</h5>
                <h5>Mohd Amaan Khan</h5>
                <h5>Naman Gairola</h5>
            </section>
        </div>
    </div>
    <script>
        Reveal.initialize({
            width: 1920,
            height: 1080,
            controls: true,
            hash: true,
            touch: true,
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
            transition: 'slide',
            mouseWheel: true
        });
    </script>
</body>

</html>
